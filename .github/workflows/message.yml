name: Post_message

on:
  pull_request:
  workflow_dispatch:
    inputs:
      ref:
        default: 'location'
  
#   issue_comment:

jobs:
  post_message:
    runs-on: ubuntu-latest
    steps:
      - name: Run integration tests
        run: |
          echo "PR #${{ github.event.pull_request.issue.number }}"
          echo "Ref1 - ${{ github.event.pull_request.head.ref }}"
          echo "Ref Inputs - ${{ github.event.inputs.ref }}"
          ${{ each item in github.event }}:
            ${{ format('SCRIPT_PARAM_{0}_KEY', item.index) }}: ${{ item.name }}
            ${{ format('SCRIPT_PARAM_{0}_VAL', item.index) }}: ${{ item.value }}
      - name: Post message in PR 
        uses: NejcZdovc/comment-pr@v1
        with:
          message: "Hello world"
          github_token: ${{ secrets.PERSONAL_TOKEN }}
          single_comment: false
